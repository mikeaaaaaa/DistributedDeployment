### usage
启动：
bash init.sh

删除：
bash remove.sh

## 注意事项：
1、需要ufw放开6371-6376 & 16371-16376端口

## 改进
日后可以讲各个配置文件的ip使用docker-compose中容器名替代，这样是的各个容器之间的交流没必要经过主机的转发，我们也没必要再开放16371-16376端口

## 原理
主从节点组成的分布式服务器集群，不需要Sentinel哨兵也能完成节点的移除和故障转移。需要将每个节点设置为集群模式，这种集群模式没有中心节点，可支持水平拓展。集群中有master、slave节点，集群节点不支持读取，从节点的读取会重定向到master节点；
集群中至少有3个master节点，每个master节点至少配置1个slave节点；
Redis Cluster将所有数据划分成16384个slots（槽位），每个节点master只负责其中的一部分槽位，槽位的信息存储于每个节点，当Redis Cluster客户端连接集群时，客户端也会存储一份集群槽位的配置信息，并缓存到本地；
Cluster 默认对key使用CRC16算法得到一个整数值，之后取模数得到具体的槽位；

当客户端向一个节点发送了查询信息，该节点可能会发现指令key对应的槽位不归自己管理，这时它会向客户端发送一个特殊的跳转指令，告诉客户端从这个新节点上获取数据，客户端跳转重定向的同时也更新本地的节点缓存信息；

l
我们上面提及过，Cluster是非集中式的，这就要求节点之间能够互相通信；默认提供了Gossip的协议进行通信，因此每个节点还需要开放一个专门用于gossip通信的端口，一般为redis接口 + 10000；

